<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cm.takemeal.recipe.model.dao.RecipeDao">

	<resultMap type="recipe" id="resultRecipe">
		<id column="no" property="no" />
		<result column="subject" property="subject" />
		<result column="contents" property="contents" />
		<result column="thumbnail" property="thumbnail" />
		<result column="time" property="time" />
		<result column="follow" property="follow" />
		<result column="hit" property="hit" />
		<result column="kcal" property="kcal" />
		<result column="userid" property="userid" />
		<result column="reg_date" property="reg_date" />
	</resultMap>
		
    <select id="selectContentCnt" resultType="int" parameterType="java.util.HashMap">
    	<![CDATA[ 
        SELECT
            COUNT(no)
        FROM
            RECIPE
		]]> 
    </select>
    
    <select id="selectContent" resultType="com.cm.takemeal.recipe.model.vo.Recipe" parameterType="java.util.HashMap">
    	<![CDATA[ 
    	SELECT * FROM (
		    SELECT no, subject, contents, time, follow, thumbnail, TO_CHAR(reg_date,'YYYY-MM-DD'), ROW_NUMBER() OVER(ORDER BY NO DESC) AS RNUM
		    FROM RECIPE
		)
		WHERE RNUM > #{start} AND RNUM <= #{end}
		]]> 
    </select>
    
    
    <select id="selectContentView" resultType="com.cm.takemeal.recipe.model.vo.Recipe" parameterType="java.util.HashMap">
    	<![CDATA[ 
		SELECT
			no,
			subject,
			contents,
			time,
			follow,
			TO_CHAR(reg_date,'YYYY-MM-DD')
		FROM 
			recipe
		WHERE 
			no = #{no}
		]]> 
    </select>
    
    
	











</mapper>
